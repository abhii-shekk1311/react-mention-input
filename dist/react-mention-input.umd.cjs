(function(A,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],d):(A=typeof globalThis<"u"?globalThis:A||self,d(A["react-mention-input"]={},A.React))})(this,function(A,d){"use strict";var F={exports:{}},D={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H;function re(){if(H)return D;H=1;var m=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function p(b,r,a){var i=null;if(a!==void 0&&(i=""+a),r.key!==void 0&&(i=""+r.key),"key"in r){a={};for(var s in r)s!=="key"&&(a[s]=r[s])}else a=r;return r=a.ref,{$$typeof:m,type:b,key:i,ref:r!==void 0?r:null,props:a}}return D.Fragment=c,D.jsx=p,D.jsxs=p,D}var L={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B;function ne(){return B||(B=1,process.env.NODE_ENV!=="production"&&function(){function m(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===E?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case I:return"Profiler";case Y:return"StrictMode";case j:return"Suspense";case y:return"SuspenseList";case M:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case N:return"Portal";case l:return(e.displayName||"Context")+".Provider";case n:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return t=e.displayName||null,t!==null?t:m(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return m(e(t))}catch{}}return null}function c(e){return""+e}function p(e){try{c(e);var t=!1}catch{t=!0}if(t){t=console;var o=t.error,u=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return o.call(t,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",u),c(e)}}function b(e){if(e===C)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===O)return"<...>";try{var t=m(e);return t?"<"+t+">":"<...>"}catch{return"<...>"}}function r(){var e=P.A;return e===null?null:e.getOwner()}function a(){return Error("react-stack-top-frame")}function i(e){if(W.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return e.key!==void 0}function s(e,t){function o(){K||(K=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",t))}o.isReactWarning=!0,Object.defineProperty(e,"key",{get:o,configurable:!0})}function v(){var e=m(this.type);return Q[e]||(Q[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function x(e,t,o,u,S,g,J,G){return o=g.ref,e={$$typeof:k,type:e,key:t,props:g,_owner:S},(o!==void 0?o:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:v}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:J}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:G}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function T(e,t,o,u,S,g,J,G){var f=t.children;if(f!==void 0)if(u)if($(f)){for(u=0;u<f.length;u++)w(f[u]);Object.freeze&&Object.freeze(f)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else w(f);if(W.call(t,"key")){f=m(e);var U=Object.keys(t).filter(function(ie){return ie!=="key"});u=0<U.length?"{key: someKey, "+U.join(": ..., ")+": ...}":"{key: someKey}",te[f+u]||(U=0<U.length?"{"+U.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,u,f,U,f),te[f+u]=!0)}if(f=null,o!==void 0&&(p(o),f=""+o),i(t)&&(p(t.key),f=""+t.key),"key"in t){o={};for(var X in t)X!=="key"&&(o[X]=t[X])}else o=t;return f&&s(o,typeof e=="function"?e.displayName||e.name||"Unknown":e),x(e,f,g,S,r(),o,J,G)}function w(e){typeof e=="object"&&e!==null&&e.$$typeof===k&&e._store&&(e._store.validated=1)}var h=d,k=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),n=Symbol.for("react.consumer"),l=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),E=Symbol.for("react.client.reference"),P=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=Object.prototype.hasOwnProperty,$=Array.isArray,z=console.createTask?console.createTask:function(){return null};h={"react-stack-bottom-frame":function(e){return e()}};var K,Q={},q=h["react-stack-bottom-frame"].bind(h,a)(),ee=z(b(a)),te={};L.Fragment=C,L.jsx=function(e,t,o,u,S){var g=1e4>P.recentlyCreatedOwnerStacks++;return T(e,t,o,!1,u,S,g?Error("react-stack-top-frame"):q,g?z(b(e)):ee)},L.jsxs=function(e,t,o,u,S){var g=1e4>P.recentlyCreatedOwnerStacks++;return T(e,t,o,!0,u,S,g?Error("react-stack-top-frame"):q,g?z(b(e)):ee)}}()),L}var Z;function oe(){return Z||(Z=1,process.env.NODE_ENV==="production"?F.exports=re():F.exports=ne()),F.exports}var R=oe();const se=m=>{const{selectedIndex:c}=m,p=d.useRef([]);return d.useEffect(()=>{const b=p.current[c];b&&b.scrollIntoView({behavior:"smooth",block:"nearest"})},[c]),{itemRefs:p}},ae=m=>{const{usersList:c,listClass:p,listItemClass:b,selectedIndex:r,handleMentionClick:a}=m,{itemRefs:i}=se({selectedIndex:r});return R.jsx("ul",{className:`${p??""} users-list shadow-2xl list-none rounded-2xl overflow-auto scrollbar-none max-h-60 min-w-60`,children:c==null?void 0:c.map((s,v)=>R.jsxs("li",{ref:x=>{i.current[v]=x},className:`${b??""} ${v===r?"bg-blue-100":""} users-list-item flex cursor-pointer items-center gap-x-4 border-b border-b-gray-200 hover:bg-blue-100 transition-all delay-100 p-3 over`,onClick:()=>a(s),children:[R.jsx("img",{className:"rounded-full h-8 w-8",src:s==null?void 0:s.profile_pic,alt:"ProfilePic"}),R.jsx("span",{children:s==null?void 0:s.name})]},s==null?void 0:s.id))})},le=m=>{const{users:c,value:p,onChange:b}=m,r=d.useRef(null),a=d.useRef(null),[i,s]=d.useState([]),[v,x]=d.useState([]),[T,w]=d.useState(!1),[h,k]=d.useState(0);d.useEffect(()=>{const n=l=>{const _=l.target;r.current&&a.current&&!r.current.contains(_)&&!a.current.contains(_)&&w(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[]),d.useEffect(()=>{k(0)},[T]);const N=n=>n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),C=n=>{const l=n.target.value,_=[];v.forEach(E=>{const P=E.name.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),W=new RegExp(`@${P}\\b`,"g"),$=l.match(W);(!$||$.length===0)&&_.push(E)});const j=v.filter(E=>!_.includes(E));x(j);const y=l.split(/\s/).pop();if(y!=null&&y.startsWith("@")){const E=y.slice(1).toLowerCase();s((c==null?void 0:c.filter(P=>P.name.toLowerCase().includes(E)))??[]),w(!0)}else w(!1);if(!j.length)return N(l);const V=j.map(E=>E.name.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")).join("|"),O=new RegExp(`@(?:${V})\\b`,"g"),M=N(l).replace(O,E=>`<span class="text-primary">${E}</span>`).replace(/\n/g,"<br>");b(M,j)},Y=n=>{T&&i.length>0&&(n.key==="ArrowDown"||n.code==="ArrowDown"?(n.preventDefault(),k(l=>(l+1)%i.length)):n.key==="ArrowUp"||n.code==="ArrowUp"?(n.preventDefault(),k(l=>l===0?i.length-1:l-1)):(n.key==="Enter"||n.code==="Enter")&&(n.preventDefault(),i[h]&&I(i[h])))},I=n=>{var M;const l=((M=r==null?void 0:r.current)==null?void 0:M.selectionStart)??0,_=p.slice(0,l).replace(/@\w*$/,`@${n.name}`),j=p.slice(l),y=`${_} ${j}`,O=v.some(E=>E.name===n.name)?v:[...v,n];x(O),b(y,O),w(!1)};return{isMentioning:T,filteredUsers:i,selectedIndex:h,textareaRef:r,userListRef:a,handleKeyDown:Y,handleMentionClick:I,handleInputChange:C}},ce=({users:m,classNames:c={},placeholder:p,rows:b,value:r,onChange:a})=>{const{isMentioning:i,filteredUsers:s,selectedIndex:v,textareaRef:x,userListRef:T,handleKeyDown:w,handleMentionClick:h,handleInputChange:k}=le({users:m,value:r,onChange:a}),{mainContainerClass:N,containerClass:C,inputClass:Y,listContainerClass:I,listClass:n,listItemClass:l}=c;return R.jsx("div",{className:`${N??""}`,children:R.jsxs("div",{className:`${C??""} relative`,children:[R.jsx("div",{"aria-hidden":!0,className:`pointer-events-none absolute top-0 left-0 w-full h-full 
                   whitespace-pre-wrap break-words rounded-md p-2`,dangerouslySetInnerHTML:{__html:r+"â€‹"}}),R.jsx("textarea",{ref:x,className:`${Y??""} relative z-10 p-2 w-full rounded-md 
                    border border-gray-300 resize-none bg-transparent 
                    text-transparent caret-black 
                    selection:text-white selection:bg-blue-600`,placeholder:p,rows:b??1,value:r??"",onKeyDown:w,onChange:k}),i&&R.jsx("div",{ref:T,className:`${I??""} absolute top-12 left-0 z-20 w-full`,children:R.jsx(ae,{selectedIndex:v,listClass:n,listItemClass:l,usersList:s,handleMentionClick:h})})]})})};A.ReactMentionInput=ce,Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
